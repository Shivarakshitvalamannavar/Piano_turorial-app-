{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Link,useParams}from'react-router-dom';import'./Piano.css';import{Key}from'./Key.js';import{NOTES,VALID_KEYS,KEY_TO_NOTE}from'../global/constants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Piano=()=>{const[pressedKeys,setPressedKeys]=useState([]);const[notes,setNotes]=useState([]);const{songName}=useParams();const playNote=note=>{if(note){const noteAudio=new Audio(\"../../notes/\".concat(note,\".mp3\"));noteAudio.play();}};const handleKeyDown=event=>{if(event.repeat){return;}const key=event.key;if(!pressedKeys.includes(key)&&VALID_KEYS.includes(key)){setPressedKeys(prevKeys=>[...prevKeys,key]);}playNote(KEY_TO_NOTE[key]);};const handleKeyUp=event=>{const key=event.key;setPressedKeys(prevKeys=>prevKeys.filter(pressedKey=>pressedKey!==key));};useEffect(()=>{const fetchData=async()=>{try{const response=await fetch(\"http://localhost:8080/\".concat(encodeURIComponent(songName)));const data=await response.json();setNotes(data.notes);}catch(error){console.error(error);}};fetchData();},[songName]);useEffect(()=>{window.addEventListener('keydown',handleKeyDown);window.addEventListener('keyup',handleKeyUp);return()=>{window.removeEventListener('keydown',handleKeyDown);window.removeEventListener('keyup',handleKeyUp);};},[pressedKeys]);const keys=NOTES.map((note,index)=>/*#__PURE__*/_jsx(Key,{note:note,pressedKeys:pressedKeys},index));const audioFiles=NOTES.map((note,index)=>/*#__PURE__*/_jsx(\"audio\",{id:note,src:\"../../notes/\".concat(note,\".mp3\")},index));return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"over\",children:\"Try playing the song!!\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"piano-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"instruct\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Instructions (Piano Keys:Keyboard Keys):\",/*#__PURE__*/_jsx(\"br\",{}),\"C:z  D:x  E:c  F:v  G:b  A:n  B:m\",/*#__PURE__*/_jsx(\"br\",{}),\"Df:s  Ef:d  Gf:g  Af:h  Bf:j\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"piano\",children:keys}),/*#__PURE__*/_jsx(\"div\",{children:audioFiles})]}),/*#__PURE__*/_jsx(\"div\",{className:\"over\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"button\",{className:\"HomeButton\",children:\"Back to Home Page\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"notes-container\",children:notes.map((note,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"note\",style:{left:\"\".concat(10+index*20,\"px\"),zIndex:index+1},children:[note,\"    \"]},index))})]});};export default Piano;// import _ from 'lodash';\n// import React, { useEffect, useState } from 'react';\n// import { Link, useParams } from 'react-router-dom';\n// import './Piano.css';\n// import { Key } from './Key.js'\n// import {\n//   NOTES,\n//   VALID_KEYS,\n//   KEY_TO_NOTE,\n// } from '../global/constants';\n// class Piano extends React.Component {\n//   constructor(props) {\n//     super(props);\n//     this.state = {\n//       pressedKeys: [],\n//     };\n//   }\n//   playNote = (note) => {\n//     if (!_.isEmpty(note)) {\n//       const noteAudio = new Audio(document.getElementById(note).src);\n//       noteAudio.play();\n//     }\n//   }\n//   handleKeyDown = (event) => {\n//     if (event.repeat) {\n//       return;\n//     }\n//     const key = event.key;\n//     const updatedPressedKeys = [...this.state.pressedKeys];\n//     if (!updatedPressedKeys.includes(key) && VALID_KEYS.includes(key)) {\n//       updatedPressedKeys.push(key);\n//     }\n//     this.setState({\n//       pressedKeys: updatedPressedKeys,\n//     });\n//     this.playNote(KEY_TO_NOTE[key]);\n//   }\n//   handleKeyUp = (event) => {\n//     const index = this.state.pressedKeys.indexOf(event.key);\n//     if (index > -1) {\n//       this.setState(state => ({\n//         pressedKeys: state.pressedKeys.splice(index, 1)\n//       }));\n//     }\n//   }\n//   componentDidMount = () => {\n//     window.addEventListener('keydown', this.handleKeyDown);\n//     window.addEventListener('keyup', this.handleKeyUp);\n//   }\n//   getnotes = async () =>\n//   {\n//     const response = await fetch('http://localhost:8080',\n//     {\n//       method: 'GET'\n//     })\n//     const notes = await response.json()\n//     console.long(notes)\n//   }\n//   render() {\n//     const keys = _.map(NOTES, (note, index) => {\n//       return (\n//         <Key\n//           key={index}\n//           note={note}\n//           pressedKeys={this.state.pressedKeys}\n//         />\n//       );\n//     });\n//     const audioFiles = _.map(NOTES, (note, index) => {\n//       return (\n//         <audio\n//           id={note}\n//           key={index}\n//           src={`../../notes/${note}.mp3`}\n//         />\n//       );\n//     });\n//     // async function fetchData() {\n//     //   try {\n//     //     const response = await fetch('http://localhost:8080/');\n//     //     const data = await response.json();\n//     //     // Process and display the data\n//     //     data.forEach((document) => {\n//     //       document.notes.forEach((note) => {\n//     //         console.log(note); // Display each element separately (you can modify this part as needed)\n//     //       });\n//     //     });\n//     //   } catch (error) {\n//     //     console.error(error);\n//     //   }\n//     // }\n//     // fetchData();\n//     return (\n//       <div>\n//         <h2 className = \"over\">Try playing the song!!</h2>\n//         <div className = \"piano-container\">\n//           <div className=\"piano\">\n//             {keys}\n//           </div>\n//           <div>\n//             {audioFiles}\n//           </div>\n//         </div>\n//         <div className = \"over\">\n//         <Link to = \"/\">\n//           <button className = \"HomeButton\">Back to Home Page</button>\n//         </Link>\n//         </div>\n//       </div>\n//     );\n//   }\n// }\n// export default Piano;","map":{"version":3,"names":["React","useEffect","useState","Link","useParams","Key","NOTES","VALID_KEYS","KEY_TO_NOTE","jsx","_jsx","jsxs","_jsxs","Piano","pressedKeys","setPressedKeys","notes","setNotes","songName","playNote","note","noteAudio","Audio","concat","play","handleKeyDown","event","repeat","key","includes","prevKeys","handleKeyUp","filter","pressedKey","fetchData","response","fetch","encodeURIComponent","data","json","error","console","window","addEventListener","removeEventListener","keys","map","index","audioFiles","id","src","children","className","to","style","left","zIndex"],"sources":["C:/wtproject/Piano Palette/src/components/Piano.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Link, useParams } from 'react-router-dom';\r\nimport './Piano.css';\r\nimport { Key } from './Key.js';\r\nimport { NOTES, VALID_KEYS, KEY_TO_NOTE } from '../global/constants';\r\n\r\nconst Piano = () => {\r\n  const [pressedKeys, setPressedKeys] = useState([]);\r\n  const [notes, setNotes] = useState([]);\r\n  const { songName } = useParams();\r\n\r\n  const playNote = (note) => {\r\n    if (note) {\r\n      const noteAudio = new Audio(`../../notes/${note}.mp3`);\r\n      noteAudio.play();\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (event) => {\r\n    if (event.repeat) {\r\n      return;\r\n    }\r\n    const key = event.key;\r\n    if (!pressedKeys.includes(key) && VALID_KEYS.includes(key)) {\r\n      setPressedKeys((prevKeys) => [...prevKeys, key]);\r\n    }\r\n    playNote(KEY_TO_NOTE[key]);\r\n  };\r\n\r\n  const handleKeyUp = (event) => {\r\n    const key = event.key;\r\n    setPressedKeys((prevKeys) => prevKeys.filter((pressedKey) => pressedKey !== key));\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const response = await fetch(`http://localhost:8080/${encodeURIComponent(songName)}`);\r\n        const data = await response.json();\r\n        setNotes(data.notes);\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [songName]);\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    window.addEventListener('keyup', handleKeyUp);\r\n\r\n    return () => {\r\n      window.removeEventListener('keydown', handleKeyDown);\r\n      window.removeEventListener('keyup', handleKeyUp);\r\n    };\r\n  }, [pressedKeys]);\r\n\r\n  const keys = NOTES.map((note, index) => (\r\n    <Key key={index} note={note} pressedKeys={pressedKeys} />\r\n  ));\r\n\r\n  const audioFiles = NOTES.map((note, index) => (\r\n    <audio key={index} id={note} src={`../../notes/${note}.mp3`} />\r\n  ));\r\n\r\n  return (\r\n    <div>\r\n      <h2 className=\"over\">Try playing the song!!</h2>\r\n      <div className=\"piano-container\">\r\n        <div className = \"instruct\">\r\n        <p>Instructions (Piano Keys:Keyboard Keys):<br></br>C:z  D:x  E:c  F:v  G:b  A:n  B:m<br></br>Df:s  Ef:d  Gf:g  Af:h  Bf:j</p>\r\n        </div>\r\n        <div className=\"piano\">{keys}</div>\r\n        <div>{audioFiles}</div>\r\n      </div>\r\n      <div className=\"over\">\r\n        <Link to=\"/\">\r\n          <button className=\"HomeButton\">Back to Home Page</button>\r\n        </Link>\r\n      </div>\r\n      <div className='notes-container'>\r\n        {/* Display the notes on the piano page */}\r\n        {notes.map((note, index) => (\r\n          <div key={index} className=\"note\" style={{ left: `${10 + index * 20}px`, zIndex: index + 1, }}>\r\n          {note}    </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Piano;\r\n\r\n\r\n// import _ from 'lodash';\r\n// import React, { useEffect, useState } from 'react';\r\n// import { Link, useParams } from 'react-router-dom';\r\n// import './Piano.css';\r\n// import { Key } from './Key.js'\r\n// import {\r\n//   NOTES,\r\n//   VALID_KEYS,\r\n//   KEY_TO_NOTE,\r\n// } from '../global/constants';\r\n\r\n// class Piano extends React.Component {\r\n//   constructor(props) {\r\n//     super(props);\r\n//     this.state = {\r\n//       pressedKeys: [],\r\n//     };\r\n//   }\r\n\r\n//   playNote = (note) => {\r\n//     if (!_.isEmpty(note)) {\r\n//       const noteAudio = new Audio(document.getElementById(note).src);\r\n//       noteAudio.play();\r\n//     }\r\n//   }\r\n\r\n//   handleKeyDown = (event) => {\r\n//     if (event.repeat) {\r\n//       return;\r\n//     }\r\n//     const key = event.key;\r\n//     const updatedPressedKeys = [...this.state.pressedKeys];\r\n//     if (!updatedPressedKeys.includes(key) && VALID_KEYS.includes(key)) {\r\n//       updatedPressedKeys.push(key);\r\n//     }\r\n//     this.setState({\r\n//       pressedKeys: updatedPressedKeys,\r\n//     });\r\n//     this.playNote(KEY_TO_NOTE[key]);\r\n//   }\r\n\r\n//   handleKeyUp = (event) => {\r\n//     const index = this.state.pressedKeys.indexOf(event.key);\r\n//     if (index > -1) {\r\n//       this.setState(state => ({\r\n//         pressedKeys: state.pressedKeys.splice(index, 1)\r\n//       }));\r\n//     }\r\n//   }\r\n\r\n//   componentDidMount = () => {\r\n//     window.addEventListener('keydown', this.handleKeyDown);\r\n//     window.addEventListener('keyup', this.handleKeyUp);\r\n//   }\r\n\r\n//   getnotes = async () =>\r\n//   {\r\n//     const response = await fetch('http://localhost:8080',\r\n//     {\r\n//       method: 'GET'\r\n//     })\r\n//     const notes = await response.json()\r\n//     console.long(notes)\r\n//   }\r\n\r\n//   render() {\r\n//     const keys = _.map(NOTES, (note, index) => {\r\n//       return (\r\n//         <Key\r\n//           key={index}\r\n//           note={note}\r\n//           pressedKeys={this.state.pressedKeys}\r\n//         />\r\n//       );\r\n//     });\r\n\r\n//     const audioFiles = _.map(NOTES, (note, index) => {\r\n//       return (\r\n//         <audio\r\n//           id={note}\r\n//           key={index}\r\n//           src={`../../notes/${note}.mp3`}\r\n//         />\r\n//       );\r\n//     });\r\n\r\n//     // async function fetchData() {\r\n//     //   try {\r\n//     //     const response = await fetch('http://localhost:8080/');\r\n//     //     const data = await response.json();\r\n    \r\n//     //     // Process and display the data\r\n//     //     data.forEach((document) => {\r\n//     //       document.notes.forEach((note) => {\r\n//     //         console.log(note); // Display each element separately (you can modify this part as needed)\r\n//     //       });\r\n//     //     });\r\n//     //   } catch (error) {\r\n//     //     console.error(error);\r\n//     //   }\r\n//     // }\r\n\r\n//     // fetchData();\r\n\r\n//     return (\r\n//       <div>\r\n//         <h2 className = \"over\">Try playing the song!!</h2>\r\n//         <div className = \"piano-container\">\r\n//           <div className=\"piano\">\r\n//             {keys}\r\n//           </div>\r\n//           <div>\r\n//             {audioFiles}\r\n//           </div>\r\n//         </div>\r\n//         <div className = \"over\">\r\n//         <Link to = \"/\">\r\n//           <button className = \"HomeButton\">Back to Home Page</button>\r\n//         </Link>\r\n//         </div>\r\n//       </div>\r\n//     );\r\n//   }\r\n// }\r\n\r\n// export default Piano;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}